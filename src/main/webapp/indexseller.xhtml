<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
"http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<!-- EventSeller-->

<!-- 1 - Menu principal Seller-->
<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui"
	xmlns:c="http://java.sun.com/jsp/jstl/core"
	template="CommonLayout.xhtml">

	<ui:define name="content">

		<div class="index">


			<p:layout fullPage="true">


				<p:layoutUnit position="center">




					<div class="center">
						<div class="midcenter2">
							<p:graphicImage library="images" name="seller.jpg"
								style="width:100%; border-top-left-radius:17px;border-top-right-radius: 17px" />

							<p:commandButton class="add" value="Adicionar Vendedor"
								update="seller" onclick="PF('AdNew').show();" type="button"
								style="width:100%;height:50px;" />

							<div class="midcenter3">
								<h:form id="SellerDisplay">
									<p:growl life="3000" />

									<!-- 		1.1 - tabela dos sellers -->
									<p:dataTable value="#{sellerBean.getSellerList()}" var="s"
										border="1" rows="10" paginator="true"
										paginatorTemplate="{CurrentPageReport} {FirstPageLink} {PreviousPageLink} {PageLinks} {NextPageLink} {LastPageLink} {RowsPerPageDropdown}"
										rowsPerPageTemplate="5,10,15">
										<div class="header">
											<p:column class="header" headerText="Id" sortBy="#{s.id}">
												<div>#{s.id}</div>
											</p:column>

											<p:column class="header" headerText="Nome"
												filterBy="#{s.name}" filterMatchMode="contains"
												sortBy="#{s.name}">
												<div class="tablecont">#{s.name}</div>
											</p:column>

											<p:column class="header" headerText="WebSite">
												<div class="tablecont">#{s.sellerUrl}</div>
											</p:column>

											<p:column class="header" headerText="Preço"
												sortBy="#{s.price}">
												<div class="tablecont">#{s.price}</div>
											</p:column>

											<p:column class="header">

												<p:commandButton icon="fa fa-fw fa-edit" class="bottab"
													update=":EditarSe:editSeller"
													oncomplete="PF('SeEdit').show();">

													<f:setPropertyActionListener value="#{s}"
														target="#{sellerBean.activeSeller}" />
												</p:commandButton>
												<p:commandButton icon="fa fa-fw fa-remove" class="bottab"
													action="#{sellerBean.delSellerInDb(s)}"
													update="SellerDisplay" />

											</p:column>
										</div>
									</p:dataTable>
								</h:form>
							</div>
							<!-- 	1.2 - Inserir detalhes do seller -->


							<h:form id="NewSe">
								<p:growl life="3000" />
								<p:dialog class="diag" header="Novo Vendedor" widgetVar="AdNew"
									resizable="false" width="480" height="250">
									<p:outputPanel id="editSeller" style="text-align:center;">
										<p:panelGrid class="diagEdit" columns="2">
											<h:outputText value="Nome: " />
											<p:inputText value="#{sellerBean.seller.name}"
												required="true" requiredMessage="Por favor insira um Nome" />

											<h:outputText value="WebSite: " />
											<p:inputText value="#{sellerBean.seller.sellerUrl}"
												required="true"
												requiredMessage="Por favor insira um WebSite" />
											<h:outputText value="Preço: " />
											<p:inputMask value="#{sellerBean.seller.price}"
												required="true" requiredMessage="Por favor insira um Preço" />
										</p:panelGrid>
										<br />

										<p:commandButton value="Gravar"
											action="#{sellerBean.addSellerToDb()}" update="SellerDisplay"
											oncomplete="PF('AdNew').hide();" />
									</p:outputPanel>
								</p:dialog>
							</h:form>

							<h:form id="EditarSe">
								<p:dialog class="diag" header="Editar Dados do Usuário"
									widgetVar="SeEdit" resizable="false" width="480" height="250">
									<!-- painel -->
									<p:outputPanel id="editSeller" style="text-align:center;">
										<p:panelGrid class="diagEdit" columns="2">

											<h:outputText value="Id: " />
											<h:inputText value="#{sellerBean.activeSeller.id}" />

											<h:outputText value="Nome: " />
											<p:inputText value="#{sellerBean.activeSeller.name}"
												required="true" />

											<h:outputText value="WebSite: " />
											<p:inputText value="#{sellerBean.activeSeller.sellerUrl}" />

											<h:outputText value="Preço: " />
											<p:inputMask value="#{sellerBean.activeSeller.price}"
												required="true" />


										</p:panelGrid>
										<br />
										<p:commandButton value="Gravar Alterações"
											action="#{sellerBean.editSellerInDb()}"
											update="SellerDisplay" oncomplete="PF('SeEdit').hide();" />
									</p:outputPanel>
								</p:dialog>
							</h:form>

						</div>
					</div>
				</p:layoutUnit>
			</p:layout>


		</div>

	</ui:define>
</ui:composition>